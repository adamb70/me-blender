<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <!--[if IE]>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="Asciidoctor 1.5.2">
    <title>SE Block Tools for Blender</title>
    <link rel="stylesheet"
          href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.2.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="Asciidoctor.css">
    <link rel="stylesheet" href="CodeRay-style.css">
    <link rel="stylesheet" href="custom-style.css">
</head>
<body class="article toc2 toc-left">
<div id="header">
    <h1>ME Block Tools for Blender</h1>
    <div id="toc" class="toc2">
        <div id="toctitle">Table of Contents</div>
        <ul class="sectlevel1">
            <li><a href="#installation">Installation</a>
                <ul class="sectlevel2">
                    <li><a href="#getting-the-tools">Getting the tools</a></li>
                    <li><a href="#installing-the-add-on">Installing the Add-on</a></li>
                </ul>
            </li>
            <li><a href="#using-the-add-on">Using the Add-on</a>
                <ul class="sectlevel2">
                    <li><a href="#file-layout">File layout</a></li>
                    <li><a href="#scene-layout">Scene Layout</a>
                        <ul class="sectlevel3">
                            <li><a href="#main-model">Main Model</a></li>
                            <li><a href="#collision-model">Collision Model</a></li>
                            <li><a href="#mount-points">Mount Points</a></li>
                            <li><a href="#construction-stages">Construction Stages</a></li>
                            <li><a href="#levels-of-detail">Levels of Detail</a></li>
                        </ul>
                    </li>
                    <li><a href="#directx-11-textures">DirectX 11 Textures</a>
                        <ul class="sectlevel3">
                            <li><a href="#pbr-textures">PBR textures</a></li>
                            <li><a href="#ao-emissivity-and-recoloring">AO, Emissivity and Recoloring</a></li>
                            <li><a href="#transparency">Transparency</a></li>
                        </ul>
                    </li>
                    <li><a href="#materials">Materials</a>
                        <ul class="sectlevel3">
                            <li><a href="#texturing">Texturing</a></li>
                            <li><a href="#parallax">Parallax</a></li>
                            <li><a href="#wind">Wind</a></li>
                            <li><a href="#glass-materials">Glass Materials</a></li>
                        </ul>
                    </li>
                    <li><a href="#empties">Empties</a>
                        <ul class="sectlevel3">
                            <li><a href="#location-markers">Location Markers</a></li>
                        </ul>
                    </li>
                </ul>
            </li>
            <li><a href="#exporting">Exporting</a>
                <ul class="sectlevel2">
                    <li><a href="#naming-conventions">Naming Conventions</a></li>
                    <li><a href="#configuring-the-export">Configuring the Export</a></li>
                    <li><a href="#exporting-mwm-files">Exporting .mwm files</a></li>
                    <li><a href="#block-definitions">Block Definitions</a></li>
                    <li><a href="#updating-cubeblocks-sbc">Updating CubeBlocks.sbc</a></li>
                </ul>
            </li>
            <li><a href="#customizing-the-export">Customizing the Export</a>
                <ul class="sectlevel2">
                    <li><a href="#text-nodes-and-sockets">Text Nodes and Sockets</a></li>
                    <li><a href="#object-filters">Object Filters</a>
                        <ul class="sectlevel3">
                            <li><a href="#layer-mask-filter">Layer Mask Filter</a></li>
                            <li><a href="#object-name-filter">Object Name Filter</a></li>
                            <li><a href="#group-name-filter">Group Name Filter</a></li>
                            <li><a href="#block-size-filter">Block Size Filter</a></li>
                            <li><a href="#layer-splitter">Layer Splitter</a></li>
                        </ul>
                    </li>
                    <li><a href="#havok-converter">Havok Converter</a></li>
                    <li><a href="#mwmbuilder">MwmBuilder</a></li>
                    <li><a href="#block-definition">Block Definition</a></li>
                </ul>
            </li>
        </ul>
    </div>
</div>
<div id="content">
    <div id="preamble">
        <div class="sectionbody">
            <div class="paragraph">
                <p>Modelling blocks for <a href="http://www.medievalengineers.com/">Medieval Engineers</a> is a process
                    that involves a lot of intermediary files and manual parametrization.
                    This add-on simplifies the steps you need to take to get from a 3D mesh in Blender to
                    Medieval Engineer&#8217;s own <code>.mwm</code> mesh-format. To do that</p>
            </div>
            <div class="olist arabic">
                <ol class="arabic">
                    <li>
                        <p>The add-on provides property panels for all the special data ME stores inside an
                            <code>.mwm</code> file directly in Blender.</p>
                    </li>
                    <li>
                        <p>You use Blender layers to define the main model, the collision model, mount-points,
                            mirroring-settings,
                            level-of-detail models and construction stages.</p>
                    </li>
                    <li>
                        <p>The workflow that configures and runs the conversion-tools (Havok, MwmBuilder) for you is
                            customizable
                            to suite your needs.</p>
                    </li>
                </ol>
            </div>
            <div class="admonitionblock note">
                <table>
                    <tr>
                        <td class="icon">
                            <i class="fa icon-note" title="Note"></i>
                        </td>
                        <td class="content">
                            The add-on (and this documentation) expect you to know how to work with Blender.
                            So if you are new to 3D modelling you should probably learn how to do that first before you
                            continue.
                        </td>

                    </tr>
                    <tr>
                        <td class="icon">
                            <i class="fa icon-note" title="Note"></i>
                        </td>
                        <td class="content">
                            If you are modding Space Engineers, you will want to use <a href="https://github.com/harag-on-steam/se-blender">Harag's se-blender add-on</a>, which this is based on.
                        </td>

                    </tr>
                </table>
            </div>
        </div>
    </div>
    <div class="sect1">
        <h2 id="installation"><a class="anchor" href="#installation"></a>Installation</h2>
        <div class="sectionbody">
            <div class="sect2">
                <h3 id="getting-the-tools"><a class="anchor" href="#getting-the-tools"></a>Getting the tools</h3>
                <div class="paragraph">
                    <p>To get started first you need to download and install all the required tools.</p>
                </div>
                <div class="dlist">
                    <dl>
                        <dt class="hdlist1">Blender</dt>
                        <dd>
                            <p>Get version <span class="icon keyseq"><i class="fa fa-download"
                                                                        title="download"></i></span> <a
                                    href="http://www.blender.org/download/">2.79</a> (100MB). (2.80 brings a lot of changes and will be supported in the future.)</p>
                        </dd>
                        <dt class="hdlist1">The Havok "Content Tools for Game Artists and Designers"</dt>
                        <dd>
                            <p>Get version <span class="icon keyseq"><i class="fa fa-download" title="download"></i></span>
                                <a href="#havok-download">2013.1.0 - 2014.1.1</a>
                                (64bit or 32bit should work)</p>
                        </dd>
                    </dl>
                </div>
                <div class="admonitionblock important">
                    <table>
                        <tr>
                            <td class="icon">
                                <i class="fa icon-important" title="Important"></i>
                            </td>
                            <td class="content">
                                The free offering of these tools has been <a href="http://www.havok.com/pcxs_redirect/">discontinued</a>.
                                Currently there are no legitimate sources any versions of HCT (such as the popular <i>havokcontenttools_2014-1-0_20140830_64bit_pcxs</i> version).
                                Please also take a look at
                                <a href="http://forums.keenswh.com/threads/havok-modding-block-collisions-is-no-longer-possible.7374937/">this
                                    forum thread</a> to see if the situation has changed.
                            </td>
                        </tr>
                    </table>
                </div>
                <div class="paragraph">
                    <p>Havok provides the filter manager <code>hctStandAloneFilterManager.exe</code> that&#8217;s used
                        to create rigid-body physics data.
                        The default install location is <code>C:\Program Files\Havok\HavokContentTools</code></p>
                </div>
                <div class="dlist">
                    <dl>
                        <dt class="hdlist1">The Havok FBX Importer</dt>
                        <dd>
                            <p><span class="icon keyseq"><i class="fa fa-download" title="download"></i></span>
                                <a href="https://github.com/harag-on-steam/fbximporter/releases/tag/havok2013.1-fbx2015.1">
                                    Havok 2013 FBXImporter.exe</a> (3,5MB)
                                <br><span class="icon keyseq"><i class="fa fa-download" title="download"></i></span>
                                <a href="https://github.com/adamb70/fbximporter/releases/tag/1.0">Havok 2014 FBXImporter.exe</a> (3,5MB)
                            <p>The .zip contains just one executable file. It&#8217;s probably a good idea to put it into the Havok Tools directory.</p>
                        </dd>
                        <dt class="hdlist1">MwmBuilder</dt>
                        <dd>
                            <p>This one comes with the Medieval Engineers ModSDK (available on Steam through the "tools" tab)
                                and is located under <code>MedievalEngineersModSDK\Tools\VRageEditor\Plugins\ModelBuilder</code>.</p>
                        </dd>
                    </dl>
                </div>
                <div class="admonitionblock note">
                    <table>
                        <tr>
                            <td class="icon">
                                <i class="fa icon-note" title="Note"></i>
                            </td>
                            <td class="content">
                                If you try to export and MwmBuilder fails with the error message
                                <code>"Error loading unmanaged library from path: Assimp32.dll"</code>
                                this is a strong indication that you are missing a software library on your system.
                                You can <span class="icon keyseq"><i class="fa fa-download" title="download"></i></span>
                                <a href="https://www.microsoft.com/en-us/download/details.aspx?id=30679">download
                                    that</a> from Microsoft.
                                Get the <code>VSU_4\vcredist_x86.exe</code> package.
                            </td>
                        </tr>
                    </table>
                </div>
            </div>
            <div class="sect2">
                <h3 id="installing-the-add-on"><a class="anchor" href="#installing-the-add-on"></a>Installing the Add-on
                </h3>
                <div class="imageblock thumb" style="float: right">
                    <div class="content">
                        <a class="image" href="images/blender-setup.png"><img src="./images/blender-setup.png" alt="blender setup" width="450"></a>
                    </div>
                </div>
                <div class="paragraph">
                    <p>Once you got the <span class="icon keyseq"><i class="fa fa-download" title="download"></i></span>
                        <a href="https://github.com/adamb70/me-blender/releases/latest">current version</a> (50kb)
                        install it in Blender like any other third-party addon by going to the user preferences,
                        switch to the "Add-Ons" tab,
                        click on "Install from File&#8230;&#8203;" and
                        point Blender to the downloaded .zip.</p>
                    <p>Alternatively, you can extract the `medieval_engineers` folder and place it in <code>\AppData\Roaming\Blender Foundation\Blender\2.79\scripts\addons\</code>.
                        Then hit the refresh button on the add-ons panel in blender.</p>
                </div>
                <div class="paragraph">
                    <p>Like any add-on you need to enable it after you&#8217;ve installed it.
                        You can find the add-on by using the search box or going to the Category "Medieval Engineers".
                        After you&#8217;ve enabled the add-on open its settings by clicking the arrow on the left.
                        You need to provide all the paths in the list.</p>
                </div>
                <div class="admonitionblock tip clearfix">
                    <table>
                        <tr>
                            <td class="icon">
                                <i class="fa icon-tip" title="Tip"></i>
                            </td>
                            <td class="content">
                                Don&#8217;t forget to "Save User Settings".
                            </td>
                        </tr>
                    </table>
                </div>
                <div class="imageblock thumb" style="float: right">
                    <div class="content">
                        <a class="image" href="images/blender-setup_disable-se.png"><img src="./images/blender-setup_disable-se.png" alt="blender setup" width="450"></a>
                    </div>
                </div>
                <div class="paragraph">
                    <p>If you also have the <a href="https://github.com/harag-on-steam/se-blender">Space Engineers Blender add-on</a> installed, you may want to disable it while working on
                    ME projects to stop the interface from getting cluttered.</p>
                </div>
            </div>
        </div>
    </div>
    <div class="sect1" style="margin-top: 40px;">
        <h2 id="using-the-add-on"><a class="anchor" href="#using-the-add-on"></a>Using the Add-on</h2>
        <div class="sectionbody">
            <div class="sect2">
                <h3 id="file-layout"><a class="anchor" href="#file-layout"></a>File layout</h3>
                <div class="paragraph">
                    <p>The add-on only has one mandatory requirement in regards to the folder layout:</p>
                </div>
                <div class="admonitionblock important">
                    <table>
                        <tr>
                            <td class="icon">
                                <i class="fa icon-important" title="Important"></i>
                            </td>
                            <td class="content">
                                The .blend file(s) must be in the base-folder of your mod.
                            </td>
                        </tr>
                    </table>
                </div>
                <div class="paragraph">
                    <p>This is necessary so that all relative paths (textures, models, etc.) are calculated
                        correctly.</p>
                </div>
            </div>
            <div class="sect2">
                <h3 id="scene-layout"><a class="anchor" href="#scene-layout"></a>Scene Layout</h3>
                <div class="paragraph">
                    <p>The addon only provides its tools to scenes that are marked as containing a block.<br>
                        You do that on the Medieval Engineers Block panel of the Scene properties-tab.</p>
                </div>
                <div class="paragraph">
                    <p>Here you also find the settings that are relevant for the basic layout of the block:</p>
                </div>
                <div class="ulist">
                    <ul>
                        <li>
                            <p>Is the block a large or a small block?</p>
                        </li>
                        <li>
                            <p>Should the export automatically create a small version of your block if it is a large
                                one?</p>
                        </li>
                        <li>
                            <p>What is the dimension of you block in in-game grid-units?</p>
                        </li>
                    </ul>
                </div>
                <div class="imageblock" style="text-align: center">
                    <div class="content">
                        <a class="image" href="images/blender-scene.png"><img src="./images/blender-scene.png"
                                                                              alt="blender scene" width="500"></a>
                    </div>
                </div>
                <div class="paragraph">
                    <p>The layers of the scene contain the different components of a block.
                        Below is the default layer-setup that is described in the following sections.</p>
                </div>
                <div class="imageblock" style="text-align: center">
                    <div class="content">
                        <a class="image" href="images/layer-overview.png"><img src="./images/layer-overview.png"
                                                                               alt="layer overview" width="550"></a>
                    </div>
                </div>
                <div class="sect3">
                    <h4 id="main-model"><a class="anchor" href="#main-model"></a>Main Model</h4>
                    <div class="paragraph">
                        <p>The first layer contains the model of the fully-built block.
                            You don&#8217;t need to restrict yourself to only one mesh-object on this layer.
                            If it&#8217;s useful to split your block into several objects&#8201;&#8212;&#8201;probably
                            to apply modifiers to some of them&#8201;&#8212;&#8201;by all means do so.</p>
                    </div>
                </div>
                <div class="sect3">
                    <h4 id="collision-model"><a class="anchor" href="#collision-model"></a>Collision Model</h4>
                    <div class="imageblock thumb" style="float: right">
                        <div class="content">
                            <a class="image" href="images/blender-physics.png"><img src="./images/blender-physics.png"
                                                                                    alt="blender physics"
                                                                                    width="450"></a>
                        </div>
                    </div>
                    <div class="paragraph">
                        <p>The second layer contains the simplified meshes that represent the block&#8217;s collision
                            shape.
                            If you don&#8217;t provide any collision meshes the resulting .mwm file will not contain
                            collision data
                            and ME will default to a simple collision box that encompasses the volume of the whole
                            block.</p>
                    </div>
                    <div class="paragraph">
                        <p>Havok, the physics engine of ME, requires some settings to do its work.
                            You provide those on Blender&#8217;s Physics tab by enabling <code>Rigid Bodies</code> for
                            your collision meshes.
                            Only the settings <code>Shape</code>, <code>Mass</code>, <code>Friction</code> and <code>Bounciness</code>
                            (Restitution) are exported to Havok.</p>
                    </div>
                    <div class="paragraph">
                        <p>Of those settings <code>Shape</code> is the most important because it has a significant
                            performance impact.
                            Whenever possible try to only approximate the shape of your block.
                            Use primitive shapes like <code>Box</code> or <code>Cylinder</code>. Use <code>Convex
                                Hull</code> only if necessary. Avoid <code>Mesh</code> collisions.</p>
                    </div>
                    <div class="admonitionblock important">
                        <table>
                            <tr>
                                <td class="icon">
                                    <i class="fa icon-important" title="Important"></i>
                                </td>
                                <td class="content">
                                    Make sure you
                                    <a href="https://www.blender.org/manual/editors/3dview/transform/transform_control/reset_object_transformations.html#apply-object-transformations">apply
                                        object transformations</a>
                                    to all collision objects before export.
                                    As a rule of thumb the add-on never modifies your objects on its own so you have to
                                    do this yourself.
                                    If you don&#8217;t the collision shapes will most probably be rotated or positioned
                                    wrong.
                                </td>
                            </tr>
                        </table>
                    </div>
                    <div class="admonitionblock note">
                        <table>
                            <tr>
                                <td class="icon">
                                    <i class="fa icon-note" title="Note"></i>
                                </td>
                                <td class="content">
                                    Blender offers a <code>Cone</code> primitive shape but Havok has no support for
                                    that.
                                    If you use a Cone shape it will be silently treated as a Convex Hull on export.
                                </td>
                            </tr>
                        </table>
                    </div>
                </div>
                <div class="sect3">
                    <h4 id="mount-points"><a class="anchor" href="#mount-points"></a>Mount Points</h4>
                    <div class="imageblock thumb" style="float: right">
                        <div class="content">
                            <a class="image" href="images/blender-mp-setup.png"><img src="./images/blender-mp-setup.png"
                                                                                     alt="blender mp setup" width="450"></a>
                        </div>
                    </div>
                    <div class="paragraph">
                        <p>The third layer defines the mount points of your block.
                            The meshes on this layer are not directly exported but are used instead to calculate the
                            <a href="#blockdef">mount point definitions</a> <span class="icon keyseq"><i
                                    class="fa fa-search-plus" title="zoom/show"></i></span>.</p>
                    </div>
                    <div class="paragraph">
                        <p>This works by creating rectangular faces that use the material <code>MountPoint</code> and
                            are aligned to one of
                            six sides of the block. To quickly create the material and an object that has one mount
                            point face for each
                            of the six sides use the corresponding button on the Tools panel of the 3D view.
                            Duplicate, resize and move those faces in edit mode to create more mount points for a side
                            of the block.
                            You can also split out faces to several objects if you want to apply
                            <a href="images/blender-mp-mirror.png">modifiers like 'mirror' or 'array'</a> <span
                                    class="icon keyseq"><i class="fa fa-search-plus" title="zoom/show"></i></span>
                            to some of the mount point faces.</p>
                    </div>
                    <div class="paragraph">
                        <p>For mount point editing it is a good idea to switch to <a href="images/blender-mp-ortho.png">ortho-view</a>
                            <span class="icon keyseq"><i class="fa fa-search-plus" title="zoom/show"></i></span> (<code>Numpad
                                5</code>) and
                            turn on 'snap to grid'.
                            You can also tell the add-on to show the block&#8217;s bounding box by enabling the option
                            on the
                            <a href="images/blender-scene.png">scene tab</a> <span class="icon keyseq"><i
                                    class="fa fa-search-plus" title="zoom/show"></i></span>.
                            It&#8217;s dashed, orange lines represent the space your block occupies in-game.
                            This should help you to position the mount points correctly.</p>
                    </div>
                    <div class="paragraph">
                        <p>If you don&#8217;t provide mount points none will be calculated.
                            The game defaults to full mount points on all sides of the block in that case.</p>
                    </div>
                </div>
                <div class="sect3">
                    <h4 id="construction-stages"><a class="anchor" href="#construction-stages"></a>Construction Stages
                    </h4>
                    <div class="paragraph">
                        <p>Layers 11-13 are used for the construction stages of the block.
                            There is one layer for each stage of construction, from earliest to latest.
                            If you change the number of construction layers you increase or decrease the number of
                            construction stages.
                            A block is allowed to have no construction stages at all.</p>
                    </div>
                    <div class="admonitionblock note">
                        <table>
                            <tr>
                                <td class="icon">
                                    <i class="fa icon-note" title="Note"></i>
                                </td>
                                <td class="content">
                                    If you don&#8217;t have meshes on a construction layer it will be skipped and your
                                    block will have one stage less.
                                </td>
                            </tr>
                        </table>
                    </div>
                    <div class="paragraph">
                        <p>By default the construction stages reuse the same collision shape your main block model uses.
                            It&#8217;s possible to change that using different export settings.
                            But keep in mind that can be dangerous to a ship or the player
                            if a block changes its physical dimensions when it is welded to completion.</p>
                    </div>
                    <div class="admonitionblock tip">
                        <table>
                            <tr>
                                <td class="icon">
                                    <i class="fa icon-tip" title="Tip"></i>
                                </td>
                                <td class="content">
                                    A Blender mesh-object can be assigned to several layers.
                                    So if your construction models get more and more detailed you can start with the
                                    basic shape as one object that
                                    is visible on all construction layers and then progressively add more objects
                                    towards the final construction layer.
                                </td>
                            </tr>
                        </table>
                    </div>
                </div>
                <div class="sect3">
                    <h4 id="levels-of-detail"><a class="anchor" href="#levels-of-detail"></a>Levels of Detail</h4>
                    <div class="paragraph">
                        <p>Layers 6-8 are used to model versions of your main model that have progressively less detail.
                            The game can display those models when the block is too far away to see the small details of
                            your main model.
                            This way less triangles need to be rendered which is good for performance.
                            The default distances at which the models are switched are 10, 30 and 50.</p>
                    </div>
                    <div class="admonitionblock note">
                        <table>
                            <tr>
                                <td class="icon">
                                    <i class="fa icon-note" title="Note"></i>
                                </td>
                                <td class="content">
                                    If you don&#8217;t have meshes on a LOD layer it will not be included in the export
                                    and
                                    the game will not switch models at that distance.
                                </td>
                            </tr>
                        </table>
                    </div>
                </div>
            </div>
            <div class="sect2">
                <h3 id="directx-11-textures"><a class="anchor" href="#directx-11-textures"></a>DirectX 11 Textures</h3>
                <div class="paragraph">
                    <p>ME now uses DX11, which employs <a href="https://www.allegorithmic.com/pbr-guide">Physically Based
                        Rendering (PBR)</a> to render 3D objects. This is represented by a set of three or four textures.</p>
                </div>
                <div class="sect3">
                    <h4 id="pbr-textures"><a class="anchor" href="#pbr-textures"></a>PBR textures</h4>
                    <div class="paragraph">
                        <p>The <code>ColorMetalTexture</code> (<code>_cm</code>) and <code>NormalGlossTexture</code>
                            (<code>_ng</code>) correspond with the common
                            <a href="http://www.marmoset.co/toolbag/learn/pbr-practice#refl">metal/roughness
                                workflow</a>
                            where glossiness is just the inverse of roughness. Here the normal map uses the OpenGL
                            convention,
                            i.e. in comparison to the DirectX convention the green channel is inverted.</p>
                    </div>
                </div>
                <div class="sect3">
                    <h4 id="ao-emissivity-and-recoloring"><a class="anchor" href="#ao-emissivity-and-recoloring"></a>AO,
                        Emissivity and Recoloring</h4>
                    <div class="paragraph">
                        <p>The <code>AddMapsTexture</code> (<code>_add</code>) combines additional greyscale maps in its
                            four channels:</p>
                    </div>
                    <div class="ulist">
                        <ul>
                            <li>
                                <p>The R-channel contains a baked Ambient Occlusion (AO) map where a value of 255 means
                                    'no occlusion' and 0 means 'fully occluded'.</p>
                            </li>
                            <li>
                                <p>The G-channel contains the emissivity. 255 is fully emissive, 0 is non-emissive.</p>
                            </li>
                            <li>
                                <p>The B-channel is used for the parallax heightmap.</p>
                            </li>
                            <li>
                                <p>The A-channel contains the re-coloring mask. The difference with the DirectX 9
                                    equivalent is that the parts of the
                                    ColorMetalTexture that are selected by this mask are usually colorless.</p>
                            </li>
                        </ul>
                    </div>
                </div>
                <div class="sect3">
                    <h4 id="transparency"><a class="anchor" href="#transparency"></a>Transparency</h4>
                    <div class="paragraph">
                        <p>The <code>AlphamaskTexture</code> (<code>_alphamask</code>) is optionally used to make parts
                            of a texture transparent.
                            It has a single greyscale channel which really only differentiates between two states:
                            fully transparent below a value of 128 or fully opaque at 128 or above.
                            This is most useful for things like foliage and small details like facial hair.
                            If you want to use this texture you need to also set the technique of the material that uses
                            it to <code>Alphamask</code>.</p>
                    </div>
                </div>
            </div>
            <div class="sect2">
                <h3 id="materials"><a class="anchor" href="#materials"></a>Materials</h3>
                <div class="sect3">
                    <h4 id="texturing"><a class="anchor" href="#texturing"></a>Texturing</h4>
                    <div class="imageblock thumb" style="float: right">
                        <div class="content">
                            <a class="image" href="images/blender-material-part1.png"><img
                                    src="./images/blender-material-part1.png" alt="blender material v3" width="450"></a>
                        </div><div>
                            <a class="image" href="images/blender-material-part2.png">
                                <img src="./images/blender-material-part2.png" alt="blender material v3" width="450" style="margin-top: 5px">
                            </a>
                        </div>
                    </div>
                    <div class="paragraph">
                        <p>Materials are what you use to tell ME which texture-files to use for the faces of your meshes
                            (and you use
                            <a href="https://www.blender.org/manual/editors/uv_image/uv_editing/overview.html">UV-mapping</a>
                            to tell the game which <em>part</em> of a texture to use for a face).</p>
                    </div>
                    <div class="paragraph">
                        <p>In Blender there are several types of materials depending on the renderer selected.
                            Blender Render is the default option, however for the node-based ME materials to work you much switch
                            to the <b>Cycles</b> renderer.</p>
                    </div>
                    <div class="paragraph">
                        <p>This add-on needs you to use node-based materials because it sets up several nodes to preview
                            the textures in Blender. To generate these nodes, after creating a new material you should click the
                            <span class="image"><img src="./images/convert-material-button.png" alt="convert-material-button" title="Convert to Nodes Material"></span>
                            button. You need to repeat this for each new material you define.</p>
                    </div>
                    <div class="paragraph">
                        <p>By doing that you get four texture-slots for the different kinds of textures ME expects.
                            Point them each to the texture-file corresponding with its name.
                            <br>You will also see two sets of sliders for <b>Parallax</b> and <b>Wind</b>. These are explained below.
                        </p>
                    </div>
                    <div class="admonitionblock tip">
                        <table>
                            <tr>
                                <td class="icon">
                                    <i class="fa icon-tip" title="Tip"></i>
                                </td>
                                <td class="content">
                                    You won&#8217;t be able to see any textures on your meshes until you set your
                                    <a href="https://www.blender.org/manual/editors/3dview/display/shading.html">viewport-shading</a>
                                    to Material. Setting it to Rendered looks even better but requires a lamp in the scene or
                                    everything will be black.
                                </td>
                            </tr>
                        </table>
                    </div>
                    <div class="admonitionblock note">
                        <table>
                            <tr>
                                <td class="icon">
                                    <i class="fa icon-note" title="Note"></i>
                                </td>
                                <td class="content">
                                    In a previous version of the add-on the <code>Blender Render</code> and its
                                    texture-slots were used. If your .blend still uses it there is an operator
                                    <code>Upgrade All Materials to use Nodes</code> you can use to get to the new
                                    material setup.
                                    It&#8217;s not available on any panel, you need to use Blender&#8217;s quicksearch (<code>Space</code>)
                                    to access it.
                                </td>
                            </tr>
                        </table>
                    </div>
                    <div class="sect4">
                        <h5 id="texture-paths"><a class="anchor" href="#texture-paths"></a>Texture Paths</h5>
                        <div class="paragraph">
                            <p>The game resolves texture-paths relative to two different base folders.
                                The first is the game&#8217;s <code>Content/</code> folder (so you are able to reuse the
                                game&#8217;s textures),
                                the second is the root-folder of the mod. This is why the add-on expects the .blend file
                                to be in the root-folder
                                because it then automatically knows the location of that folder without you telling it.
                            </p>
                        </div>
                        <div class="paragraph">
                            <p>When exporting .mwm files the add-on derives the correct relative texture-paths by
                                comparing each texture&#8217;s absolute path
                                against the root-folder of your mod and additionally to the game&#8217;s location (as
                                configured in the add-on preferences).</p>
                        </div>
                        <div class="admonitionblock important">
                            <table>
                                <tr>
                                    <td class="icon">
                                        <i class="fa icon-important" title="Important"></i>
                                    </td>
                                    <td class="content">
                                        Don&#8217;t use texture-files that are not inside the mod folder or the game&#8217;s
                                        <code>Content\</code> folder.
                                        Neither Blender nor the add-on will prevent you from doing so but this will not
                                        work when exporting .mwm files.
                                    </td>
                                </tr>
                            </table>
                        </div>
                        <div class="admonitionblock note">
                            <table>
                                <tr>
                                    <td class="icon">
                                        <i class="fa icon-note" title="Note"></i>
                                    </td>
                                    <td class="content">
                                        The add-on does not check if the path of a texture actually points to an
                                        existing file.
                                        But it&#8217;s easy to spot missing texture-files when you configure the 3D view
                                        to display meshes with their materials.
                                    </td>
                                </tr>
                            </table>
                        </div>
                    </div>
                </div>
                <div class="sect3">
                    <h4 id="parallax"><a class="anchor" href="#parallax"></a>Parallax</h4>
                    <div class="paragraph">
                        <p><a href="https://learnopengl.com/Advanced-Lighting/Parallax-Mapping">Parallax mapping</a>
                            is a new feature to ME that creates an illusion of depth on a flat surface. To get parallax working you will need
                            a greyscale heightmap in the <b>blue channel</b> of the AddMaps file. You will also need to set the Parallax <b>Height</b> value in blender.
                            This value sets the scale of the parallax effect. The second slider, <b>Offset</b>, is used to offset the "back plane" of the parallax.
                            It is best to play around with these values and see the effects in game to understand what they do.</p>
                    </div>
                </div>
                <div class="sect3">
                    <h4 id="wind"><a class="anchor" href="#wind"></a>Wind</h4>
                    <div class="paragraph">
                        <p>ME has an option to apply a wind animation to your models. You can see this animation on the leaves of some plants and trees in game.
                            To use the wind animation, simple set the wind <b>Scale</b> and <b>Frequency</b> for the mesh material you want animated.
                    </div>
                </div>
                <div class="sect3">
                    <h4 id="glass-materials"><a class="anchor" href="#glass-materials"></a>Glass Materials</h4>
                    <div class="paragraph">
                        <p>Glass materials are handled specially by the game.
                            They have some extra settings that are not contained in an .mwm file
                            but are instead stored in a file called <code>TransparentMaterials.sbc</code>.
                            It makes no sense for this add-on to support editing the content of this file
                            because the settings cannot be viewed in Blender, anyway.</p>
                    </div>
                    <div class="paragraph">
                        <p>What you get if you change a material from <code>Normal</code> to <code>Glass</code> are the
                            settings that <em>are</em> stored in the
                            .mwm file on export. For the meaning of these settings please refer to Keen&#8217;s
                            <a href="http://steamcommunity.com/sharedfiles/filedetails/?id=300427203">tutorial</a>
                            on transparent materials.</p>
                    </div>
                </div>
            </div>
            <div class="sect2">
                <h3 id="empties"><a class="anchor" href="#empties"></a>Empties</h3>
                <div class="sect3">
                    <h4 id="location-markers"><a class="anchor" href="#location-markers"></a>Location Markers</h4>
                    <div class="paragraph">
                        <p>ME uses empties to represent predefined points of interest on a model like interaction areas and
                            effect origins (smoke, fire, etc). The purpose of each empty is determined by its name&#8201;&#8212;&#8201;i.e.
                            <code>detector_inventory</code> or <code>detector_furnace</code> for example.</p>
                    </div>
                    <div class="sect4">
                        <h5 id="volumetric-handles"><a class="anchor" href="#volumetric-handles"></a>Volumetric Handles
                        </h5>
                        <div class="paragraph">
                            <p>Some empties only serve as location markers. Some others like the aforementioned <code>detector_inventory</code>
                                have some volume to them and you need to point your crosshair inside the volume to
                                interact with the empty in the game.
                                The size of that volume is determined by the scaling of the empty.</p>
                        </div>
                        <div class="paragraph">
                            <p>The add-on needs to know if an empty is a volumetric handle because it needs to scale it
                                down in size
                                if the option is used to create a small block version from a large block.
                                To turn an empty into a volumetric handle use the <a
                                        href="images/empty_volumetric_handle.png">corresponding button</a> <span
                                        class="icon keyseq"><i class="fa fa-search-plus" title="zoom/show"></i></span>
                                This will display the empty as a box with the exact size it will have in-game.</p>
                        </div>
                    </div>
                    <div class="sect4">
                        <h5 id="model-highlights"><a class="anchor" href="#model-highlights"></a>Model Highlights</h5>
                        <div class="paragraph">
                            <p>Some blocks like doors and chests use model highlights when the player is aiming at an interactable area.
                                To choose which mesh part is highlighted select the model in the <b>Highlight Mesh</b> field
                                on the Data tab of the empty that defines the interactable area.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="sect1">
        <h2 id="exporting"><a class="anchor" href="#exporting"></a>Exporting</h2>
        <div class="sectionbody">
            <div class="sect2">
                <h3 id="naming-conventions"><a class="anchor" href="#naming-conventions"></a>Naming Conventions</h3>
                <div class="paragraph">
                    <p>All names that are used during export are derived from the scene name:</p>
                </div>
                <table class="tableblock frame-all grid-all spread">
                    <colgroup>
                        <col style="width: 32%;">
                        <col style="width: 64%;">
                        <col style="width: 4%;">
                    </colgroup>
                    <tbody>
                    <tr>
                        <td class="tableblock halign-left valign-top"><p class="tableblock">BlockPairName</p></td>
                        <td class="tableblock halign-left valign-top"><p class="tableblock"><code>{Name of the
                            Scene}</code></p></td>
                        <td class="tableblock halign-left valign-top"></td>
                    </tr>
                    <tr>
                        <td class="tableblock halign-left valign-top"><p class="tableblock">SubtypeId</p></td>
                        <td class="tableblock halign-left valign-top"><p class="tableblock"><code>{BlockPairName}_{CubeSize}</code>
                        </p></td>
                        <td class="tableblock halign-left valign-top"><p class="tableblock"><span class="icon keyseq"><i
                                class="fa fa-wrench" title="customizable"></i></span></p></td>
                    </tr>
                    <tr>
                        <td class="tableblock halign-left valign-top"><p class="tableblock">ModelsDir</p></td>
                        <td class="tableblock halign-left valign-top"><p class="tableblock">the chosen export-path from
                            the scene properties</p></td>
                        <td class="tableblock halign-left valign-top"></td>
                    </tr>
                    <tr>
                        <td class="tableblock halign-left valign-top"><p class="tableblock">Model</p></td>
                        <td class="tableblock halign-left valign-top"><p class="tableblock"><code>{ModelsDir}\{SubtypeId}.mwm</code>
                        </p></td>
                        <td class="tableblock halign-left valign-top"><p class="tableblock"><span class="icon keyseq"><i
                                class="fa fa-wrench" title="customizable"></i></span></p></td>
                    </tr>
                    <tr>
                        <td class="tableblock halign-left valign-top"><p class="tableblock">Construction Model</p></td>
                        <td class="tableblock halign-left valign-top"><p class="tableblock"><code>{ModelsDir}\{SubtypeId}_Constr{n}.mwm</code>
                        </p></td>
                        <td class="tableblock halign-left valign-top"><p class="tableblock"><span class="icon keyseq"><i
                                class="fa fa-wrench" title="customizable"></i></span></p></td>
                    </tr>
                    <tr>
                        <td class="tableblock halign-left valign-top"><p class="tableblock">Level-of-Detail Model</p>
                        </td>
                        <td class="tableblock halign-left valign-top"><p class="tableblock"><code>{ModelsDir}\{SubtypeId}_LOD{n}.mwm</code>
                        </p></td>
                        <td class="tableblock halign-left valign-top"><p class="tableblock"><span class="icon keyseq"><i
                                class="fa fa-wrench" title="customizable"></i></span></p></td>
                    </tr>
                    <tr>
                        <td class="tableblock halign-left valign-top"><p class="tableblock">Icon</p></td>
                        <td class="tableblock halign-left valign-top"><p class="tableblock"><code>Textures\Icons\{BlockPairName}.dds</code>
                        </p></td>
                        <td class="tableblock halign-left valign-top"></td>
                    </tr>
                    </tbody>
                </table>
                <div class="admonitionblock warning">
                    <table>
                        <tr>
                            <td class="icon">
                                <i class="fa icon-warning" title="Warning"></i>
                            </td>
                            <td class="content">
                                The BlockPairName and the SubtypeId are globally visible to all parts of the game.
                                So it&#8217;s important that you choose a sufficiently unique name for the scene to
                                avoid naming-collisions with other mods.
                                It&#8217;s probably also a good idea to not use spaces in your names.
                            </td>
                        </tr>
                    </table>
                </div>
                <div class="paragraph">
                    <p>You can customize the SubtypeIds of blocks by enabling the corresponding option in the scene
                        properties.
                        This is primarily meant for mod authors that want to use the add-on but need their existing
                        blocks to keep their ids
                        to remain backwards-compatible. Otherwise there is hardly a good reason to change them.</p>
                </div>
            </div>
            <div class="sect2">
                <h3 id="configuring-the-export"><a class="anchor" href="#configuring-the-export"></a>Configuring the
                    Export</h3>
                <div class="imageblock thumb" style="float: right">
                    <div class="content">
                        <img src="./images/blender-no-nodes-yet.png" alt="blender no nodes yet">
                    </div>
                </div>
                <div class="paragraph">
                    <p>The addon needs to know which folder models should be exported into.
                        You can configure this per scene via the <code>Export Subpath</code> property in the scene
                        properties.</p>
                </div>
                <div class="paragraph">
                    <p>How the meshes of your scene are exported is configured via a custom Blender node-tree.
                        Initially your .blend file contains no such node-tree and your scene&#8217;s default
                        settings-name <code>MwmExport</code>
                        will be displayed as invalid. You can create the default settings by clicking on the
                        <code>+</code> next to the settings-selector.</p>
                </div>
                <div class="paragraph">
                    <p>Clicking "Export scene as block" will then immediately export the scene to the chosen folder.
                        Holding down <code>Alt</code> while clicking the button will export all the scenes in your
                        .blend file.
                        In this case each scene will use its own folder and settings.</p>
                </div>
                <div class="admonitionblock warning">
                    <table>
                        <tr>
                            <td class="icon">
                                <i class="fa icon-warning" title="Warning"></i>
                            </td>
                            <td class="content">
                                The chosen export folder needs to be a subpath of the folder containing your .blend
                                file.
                                Otherwise references to your models will be calculated wrong (CubeBlocks.sbc, LODs).
                            </td>
                        </tr>
                    </table>
                </div>
            </div>
            <div class="sect2">
                <h3 id="exporting-mwm-files"><a class="anchor" href="#exporting-mwm-files"></a>Exporting .mwm files</h3>
                <div class="paragraph">
                    <p>By default the export runs through theses steps:</p>
                </div>
                <div class="olist arabic">
                    <ol class="arabic">
                        <li>
                            <p>Export the collision-meshes to a <code>.hkt.fbx</code> file</p>
                        </li>
                        <li>
                            <p>Convert the <code>.hkt.fbx</code> file into a <code>.hkt</code> file via Havok&#8217;s
                                FBX-importer</p>
                        </li>
                        <li>
                            <p>Run the <code>.hkt</code> file through Havok&#8217;s filter-manager to calculate and add
                                rigid body data to it</p>
                        </li>
                        <li>
                            <p>Repeat the following steps for the main layer and all construction and level-of-detail
                                layers</p>
                            <div class="olist loweralpha">
                                <ol class="loweralpha" type="a">
                                    <li>
                                        <p>Export the meshes to a <code>.fbx</code> file</p>
                                    </li>
                                    <li>
                                        <p>Export the info for materials and linked levels-of-detail to a
                                            <code>.xml</code> file with parameters for MwmBuilder</p>
                                    </li>
                                    <li>
                                        <p>Use the <code>.fbx</code>, <code>.xml</code> and <code>.hkt</code> files as
                                            input for MwmBuilder to produce the final .mwm file</p>
                                    </li>
                                </ol>
                            </div>
                        </li>
                    </ol>
                </div>
                <div class="admonitionblock note">
                    <table>
                        <tr>
                            <td class="icon">
                                <i class="fa icon-note" title="Note"></i>
                            </td>
                            <td class="content">
                                The add-on logs the result of each step of the export in Blender&#8217;s
                                <a href="images/blender-report.png">info-log</a> <span class="icon keyseq"><i
                                    class="fa fa-search-plus" title="zoom/show"></i></span>.
                                In addition the output of external tools is logged to separate log files that are named
                                like the file that is
                                exported by the step with <code>.log</code> appended.
                                <strong>If an external tool fails for any reason or does not produce the expected file
                                    you should consult these log-files</strong>.
                            </td>
                        </tr>
                    </table>
                </div>
            </div>
            <div class="sect2">
                <h3 id="block-definitions"><a class="anchor" href="#block-definitions"></a>Block Definitions</h3>
                <div class="paragraph">
                    <p>When you export .mwm files the add-on also creates a corresponding <code>.blockdef.xml</code>
                        file for each exported block.
                        This file contains all the information that is available in Blender and that is relevant
                        for a block&#8217;s <code>&lt;Definition&gt;</code> inside your mod&#8217;s
                        <code>CubeBlocks.sbc</code>:</p>
                </div>
                <div id="blockdef" class="listingblock">
                    <div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;Definition&gt;</span>
  <span class="tag">&lt;Id&gt;</span>
    <span class="tag">&lt;SubtypeId&gt;</span>ExampleBlock_Large<span class="tag">&lt;/SubtypeId&gt;</span>
  <span class="tag">&lt;/Id&gt;</span>
  <span class="tag">&lt;Icon&gt;</span>Textures\Icons\ExampleBlock.dds<span class="tag">&lt;/Icon&gt;</span>
  <span class="tag">&lt;CubeSize&gt;</span>Large<span class="tag">&lt;/CubeSize&gt;</span>
  <span class="tag">&lt;BlockTopology&gt;</span>TriangleMesh<span class="tag">&lt;/BlockTopology&gt;</span>
  <span class="tag">&lt;Size</span> <span class="attribute-name">x</span>=<span class="string"><span class="delimiter">&quot;</span><span
            class="content">1</span><span class="delimiter">&quot;</span></span> <span
            class="attribute-name">y</span>=<span class="string"><span class="delimiter">&quot;</span><span
            class="content">1</span><span class="delimiter">&quot;</span></span> <span
            class="attribute-name">z</span>=<span class="string"><span class="delimiter">&quot;</span><span
            class="content">1</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
  <span class="tag">&lt;ModelOffset</span> <span class="attribute-name">x</span>=<span class="string"><span
            class="delimiter">&quot;</span><span class="content">0</span><span
            class="delimiter">&quot;</span></span> <span class="attribute-name">y</span>=<span class="string"><span
            class="delimiter">&quot;</span><span class="content">0</span><span
            class="delimiter">&quot;</span></span> <span class="attribute-name">z</span>=<span class="string"><span
            class="delimiter">&quot;</span><span class="content">0</span><span
            class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
  <span class="tag">&lt;Model&gt;</span>Models\ExampleBlock_Large.mwm<span class="tag">&lt;/Model&gt;</span>
  <span class="tag">&lt;BuildProgressModels&gt;</span>
    <span class="tag">&lt;Model</span> <span class="attribute-name">BuildPercentUpperBound</span>=<span
            class="string"><span class="delimiter">&quot;</span><span class="content">0.33</span><span
            class="delimiter">&quot;</span></span> <span class="attribute-name">File</span>=<span class="string"><span
            class="delimiter">&quot;</span><span class="content">Models\ExampleBlock_Large_Constr1.mwm</span><span
            class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
    <span class="tag">&lt;Model</span> <span class="attribute-name">BuildPercentUpperBound</span>=<span
            class="string"><span class="delimiter">&quot;</span><span class="content">0.67</span><span
            class="delimiter">&quot;</span></span> <span class="attribute-name">File</span>=<span class="string"><span
            class="delimiter">&quot;</span><span class="content">Models\ExampleBlock_Large_Constr2.mwm</span><span
            class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
    <span class="tag">&lt;Model</span> <span class="attribute-name">BuildPercentUpperBound</span>=<span
            class="string"><span class="delimiter">&quot;</span><span class="content">1.00</span><span
            class="delimiter">&quot;</span></span> <span class="attribute-name">File</span>=<span class="string"><span
            class="delimiter">&quot;</span><span class="content">Models\ExampleBlock_Large_Constr3.mwm</span><span
            class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
  <span class="tag">&lt;/BuildProgressModels&gt;</span>
  <span class="tag">&lt;MountPoints&gt;</span>
    <span class="tag">&lt;MountPoint</span> <span class="attribute-name">Side</span>=<span class="string"><span
            class="delimiter">&quot;</span><span class="content">Left</span><span class="delimiter">&quot;</span></span> <span
            class="attribute-name">StartX</span>=<span class="string"><span class="delimiter">&quot;</span><span
            class="content">0.30</span><span class="delimiter">&quot;</span></span> <span
            class="attribute-name">StartY</span>=<span class="string"><span class="delimiter">&quot;</span><span
            class="content">0.00</span><span class="delimiter">&quot;</span></span> <span
            class="attribute-name">EndX</span>=<span class="string"><span class="delimiter">&quot;</span><span
            class="content">1.00</span><span class="delimiter">&quot;</span></span> <span
            class="attribute-name">EndY</span>=<span class="string"><span class="delimiter">&quot;</span><span
            class="content">0.40</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
    <span class="tag">&lt;MountPoint</span> <span class="attribute-name">Side</span>=<span class="string"><span
            class="delimiter">&quot;</span><span class="content">Left</span><span class="delimiter">&quot;</span></span> <span
            class="attribute-name">StartX</span>=<span class="string"><span class="delimiter">&quot;</span><span
            class="content">0.00</span><span class="delimiter">&quot;</span></span> <span
            class="attribute-name">StartY</span>=<span class="string"><span class="delimiter">&quot;</span><span
            class="content">0.00</span><span class="delimiter">&quot;</span></span> <span
            class="attribute-name">EndX</span>=<span class="string"><span class="delimiter">&quot;</span><span
            class="content">0.30</span><span class="delimiter">&quot;</span></span> <span
            class="attribute-name">EndY</span>=<span class="string"><span class="delimiter">&quot;</span><span
            class="content">0.10</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
    ...
  <span class="tag">&lt;/MountPoints&gt;</span>
  <span class="tag">&lt;MirroringX&gt;</span>HalfY<span class="tag">&lt;/MirroringX&gt;</span>
  <span class="tag">&lt;BlockPairName&gt;</span>ExampleBlock<span class="tag">&lt;/BlockPairName&gt;</span>
<span class="tag">&lt;/Definition&gt;</span></code></pre>
                    </div>
                </div>
                <div class="admonitionblock important">
                    <table>
                        <tr>
                            <td class="icon">
                                <i class="fa icon-important" title="Important"></i>
                            </td>
                            <td class="content">
                                This definition is incomplete. It only contains the parts Blender knows about.
                                You have to add missing properties like <code>&lt;TypeId&gt;</code> or <code>&lt;Components&gt;</code>
                                yourself.
                            </td>
                        </tr>
                    </table>
                </div>
            </div>
            <div class="sect2">
                <h3 id="updating-cubeblocks-sbc"><a class="anchor" href="#updating-cubeblocks-sbc"></a>Updating
                    CubeBlocks.sbc</h3>
                <div class="paragraph">
                    <p>You can use the "Update block definitions" operation to tell the add-on to take the same XML data
                        it writes to a <code>.blockdef.xml</code> file and merge it with matching <code>&lt;Definition&gt;</code>
                        sections of your mod&#8217;s <code>CubeBlocks.sbc</code>.
                        That saves you the trouble to do this by hand.</p>
                </div>
                <div class="admonitionblock note">
                    <table>
                        <tr>
                            <td class="icon">
                                <i class="fa icon-note" title="Note"></i>
                            </td>
                            <td class="content">
                                Updating <code>CubeBlocks.sbc</code> will only work for blocks that are already present
                                in the file.
                                The add-on searches for them by their <code>&lt;SubtypeId&gt;</code>.
                            </td>
                        </tr>
                    </table>
                </div>
            </div>
        </div>
    </div>
    <div class="sect1">
        <h2 id="customizing-the-export"><a class="anchor" href="#customizing-the-export"></a>Customizing the Export</h2>
        <div class="sectionbody">
            <div class="imageblock thumb" style="float: right">
                <div class="content">
                    <a class="image" href="images/export-nodes-setup.png"><img src="./images/export-nodes-setup.png"
                                                                               alt="export nodes setup" width="500"></a>
                </div>
            </div>
            <div class="paragraph">
                <p>The add-on uses a custom Blender node-tree to drive the export.
                    The connections between the nodes of that tree describe how the objects in the scene flow through
                    the export.</p>
            </div>
            <div class="paragraph">
                <p>The sockets of the nodes are color-coded to quickly recognized which sockets can connect to each
                    other.
                    The color-coding also signals if the connection between two nodes is dysfunctional by turning the
                    sockets dark-grey.
                    This happens if the nodes detect that no objects would flow between them&#8201;&#8212;&#8201;most
                    probably because there <em>are</em> no objects.
                    If an illegal connection is detected the affected sockets will be colored bright red.</p>
            </div>
            <div class="sect2">
                <h3 id="text-nodes-and-sockets"><a class="anchor" href="#text-nodes-and-sockets"></a>Text Nodes and
                    Sockets</h3>
                <div class="imageblock" style="text-align: center">
                    <div class="content">
                        <a class="image" href="images/nodes-text.png"><img src="./images/nodes-text.png"
                                                                           alt="nodes text" width="550"></a>
                    </div>
                </div>
                <div class="paragraph">
                    <p>Several of the other nodes require text-input to name the files they produce.
                        You can provide that text either directly via the corresponding white input-socket of each node
                        or,
                        if you want to reuse a text snippet, you can instead use a text-node and connect that to the
                        input-socket.
                        To avoid having to define an export node-tree for each scene all text-fields can use parameters
                        that
                        get substituted with information stored in the scene:</p>
                </div>
                <table class="tableblock frame-all grid-all spread">
                    <colgroup>
                        <col style="width: 33%;">
                        <col style="width: 66%;">
                    </colgroup>
                    <thead>
                    <tr>
                        <th class="tableblock halign-left valign-top">Parameter Name</th>
                        <th class="tableblock halign-left valign-top">Description</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr>
                        <td class="tableblock halign-left valign-top"><p class="tableblock"><code>BlockPairName</code>
                        </p></td>
                        <td class="tableblock halign-left valign-top"><p class="tableblock">Contains the name of the
                            scene. The suffixes <code>.001</code>, <code>.Large</code> and <code>.Small</code> are
                            automatically removed.</p></td>
                    </tr>
                    <tr>
                        <td class="tableblock halign-left valign-top"><p class="tableblock"><code>SubtypeId</code></p>
                        </td>
                        <td class="tableblock halign-left valign-top"><p class="tableblock">Normally derived from the
                            scene-name and the cube-size but can be explicitly configured in the scene properties.</p>
                        </td>
                    </tr>
                    <tr>
                        <td class="tableblock halign-left valign-top"><p class="tableblock"><code>CubeSize</code></p>
                        </td>
                        <td class="tableblock halign-left valign-top"><p class="tableblock">Either <code>Large</code> or
                            <code>Small</code> depending on the configured cube-size. Will contain both values
                            consecutively
                            if the scene is configured to automatically create a scaled-down small version.</p></td>
                    </tr>
                    <tr>
                        <td class="tableblock halign-left valign-top"><p class="tableblock"><code>n</code></p></td>
                        <td class="tableblock halign-left valign-top"><p class="tableblock">The sequence-number of the
                            source-socket. See the next section for details.</p></td>
                    </tr>
                    </tbody>
                </table>
                <div class="imageblock" style="float: right">
                    <div class="content">
                        <a class="image" href="images/nodes-objects.png"><img src="./images/nodes-objects.png"
                                                                              alt="nodes objects" width="160"></a>
                    </div>
                </div>
            </div>
            <div class="sect2">
                <h3 id="object-filters"><a class="anchor" href="#object-filters"></a>Object Filters</h3>
                <div class="paragraph">
                    <p>This kind of node determines the objects that should get processed. There are several variants.
                        They all have an object-input socket so that you can build filter chains with them.
                        If that input socket is not connected to anything it will use all objects in the scene as
                        input.</p>
                </div>
                <div class="sect3">
                    <h4 id="layer-mask-filter"><a class="anchor" href="#layer-mask-filter"></a>Layer Mask Filter</h4>
                    <div class="paragraph">
                        <p>This node uses a layer mask to filter out objects that are not on the marked layers.</p>
                    </div>
                </div>
                <div class="sect3">
                    <h4 id="object-name-filter"><a class="anchor" href="#object-name-filter"></a>Object Name Filter</h4>
                    <div class="paragraph">
                        <p>This filter matches objects by their name.
                            You can either choose an exact name or switch the node to use a <a href="http://pythex.org">regular
                                expression</a>.
                            You can also invert the match so only objects get included that do <em>not</em> match the
                            pattern.</p>
                    </div>
                </div>
                <div class="sect3">
                    <h4 id="group-name-filter"><a class="anchor" href="#group-name-filter"></a>Group Name Filter</h4>
                    <div class="paragraph">
                        <p>This filter works just like an Object Name filter, only on the names of groups the object is
                            in.</p>
                    </div>
                </div>
                <div class="sect3">
                    <h4 id="block-size-filter"><a class="anchor" href="#block-size-filter"></a>Block Size Filter</h4>
                    <div class="paragraph">
                        <p>This node has two input sockets and selects between them depending on the currently exported
                            block-size.
                            This is useful if you have objects in your scene that should only be exported for one
                            block-size but not for the other:</p>
                    </div>
                    <div class="imageblock" style="text-align: center">
                        <div class="content">
                            <a class="image" href="images/nodes-large-small-conveyor.png"><img
                                    src="./images/nodes-large-small-conveyor.png" alt="nodes large small conveyor"
                                    width="450"></a>
                        </div>
                    </div>
                </div>
                <div class="sect3">
                    <h4 id="layer-splitter"><a class="anchor" href="#layer-splitter"></a>Layer Splitter</h4>
                    <div class="paragraph">
                        <p>This node adds one output-socket for every layer you select.
                            Each of those sockets only provides the objects from the corresponding layer.
                            This is useful for sequential groups of meshes like construction stages.
                            The node also implicitly numbers the output-sockets starting at <code>1</code>.
                            The number is available for text-substitution as parameter <code>${n}</code>.</p>
                    </div>
                    <div class="imageblock" style="float: right">
                        <div class="content">
                            <a class="image" href="images/nodes-havok.png"><img src="./images/nodes-havok.png"
                                                                                alt="nodes havok" width="150"></a>
                        </div>
                    </div>
                </div>
            </div>
            <div class="sect2">
                <h3 id="havok-converter"><a class="anchor" href="#havok-converter"></a>Havok Converter</h3>
                <div class="paragraph">
                    <p>This kind of node produces a <code>.hkt</code> file by taking the objects from its input-socket
                        and running them first through
                        Blender&#8217;s FBX exporter, then through Havok&#8217;s FBX Importer and after that through
                        Havok&#8217;s Standalone Filter Manager.</p>
                </div>
                <div class="admonitionblock note">
                    <table>
                        <tr>
                            <td class="icon">
                                <i class="fa icon-note" title="Note"></i>
                            </td>
                            <td class="content">
                                The node ignores objects that don&#8217;t have <code>Rigid Body</code> enabled on their
                                <code>Physics</code> property-tab.
                            </td>
                        </tr>
                    </table>
                </div>
                <div class="imageblock" style="float: right">
                    <div class="content">
                        <a class="image" href="images/nodes-mwm.png"><img src="./images/nodes-mwm.png" alt="nodes mwm"
                                                                          width="150"></a>
                    </div>
                </div>
            </div>
            <div class="sect2">
                <h3 id="mwmbuilder"><a class="anchor" href="#mwmbuilder"></a>MwmBuilder</h3>
                <div class="paragraph">
                    <p>This kind of node produces a <code>.mwm</code> file by taking the objects from its input-socket
                        and running
                        them through MwmBuilder. The node uses Blender&#8217;s FBX exporter internally.
                        The settings for the exporter are only available in the properties section of the node-tree&#8217;s
                        <code>N</code> side-panel.</p>
                </div>
                <div class="imageblock" style="float: left">
                    <div class="content">
                        <a class="image" href="images/mwm-settings.png"><img src="./images/mwm-settings.png"
                                                                             alt="mwm settings" width="220"></a>
                    </div>
                </div>
                <div class="paragraph">
                    <p>The default settings can be used as-is to export a block to SE. If you change the settings,
                        you can save them as a preset. There already are presets to do character and animation exports
                        and also to restore the default block settings.</p>
                </div>
                <div class="paragraph">
                    <p>The node will also include the collision data of a Havok Converter node if it is connected to
                        one.
                        And lastly a MwmBuilder node can receive the output of other MwmBuilder nodes.
                        Those nodes will then serve as the <a href="#levels-of-detail">level-of-detail</a> models and
                        the produced <code>.mwm</code>
                        will contain references to them.</p>
                </div>
                <div class="imageblock" style="float: right">
                    <div class="content">
                        <a class="image" href="images/nodes-blockdef.png"><img src="./images/nodes-blockdef.png"
                                                                               alt="nodes blockdef" width="250"></a>
                    </div>
                </div>
            </div>
            <div class="sect2">
                <h3 id="block-definition"><a class="anchor" href="#block-definition"></a>Block Definition</h3>
                <div class="paragraph">
                    <p>An export-tree can only contain a single node of this kind.
                        The node takes the output from several other nodes to generate the <a href="#block-definitions">block-definition</a>
                        for the scene.
                        Of special note are the input-sockets for <a href="#mount-points">mount-points</a> and <a
                                href="#mirroring">mirroring-settings</a>
                        which are not consumed anywhere else in the export-tree.</p>
                </div>
                <div class="admonitionblock note">
                    <table>
                        <tr>
                            <td class="icon">
                                <i class="fa icon-note" title="Note"></i>
                            </td>
                            <td class="content">
                                Updating CubeBlocks.sbc will be disabled if the export-tree contains no node of this
                                kind.
                            </td>
                        </tr>
                    </table>
                </div>
                <div class="paragraph">
                    <p>
                        <link href="featherlight.min.css" type="text/css" rel="stylesheet" title="Featherlight Styles"/>
                        <script src="jquery.min.js" type="text/javascript" charset="utf-8"></script>
                        <script src="featherlight.min.js" type="text/javascript" charset="utf-8"></script>
                        <script>$('a[href$=".png"]').featherlight();
						$('a[href="#blockdef"]').featherlight();</script>
                    </p>
                </div>
            </div>
        </div>
    </div>
</div>
<div id="footer">
    <div id="footer-text">
        Last updated March 17 2019
    </div>
</div>
</body>
</html>
